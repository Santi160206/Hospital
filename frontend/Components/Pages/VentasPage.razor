@page "/VentasPage"
@using FrontEndBlazor.Models
@using FrontEndBlazor.Services
@inject IMedicamentoService MedicamentoService
@inject IAuthService AuthService
@inject NavigationManager NavigationManager

<PageTitle>Dashboard de Ventas</PageTitle>

<h3 class="mb-4">Resumen General</h3>

<div class="grid grid-cols-4 gap-4">
    <Card><CardContent><h4>@TotalVentas</h4><p>Ventas del Mes</p></CardContent></Card>
    <Card><CardContent><h4>@TotalUnidades</h4><p>Medicamentos Vendidos</p></CardContent></Card>
    <Card><CardContent><h4>@StockCritico</h4><p>Stock Cr√≠tico</p></CardContent></Card>
    <Card><CardContent><h4>@IngresosTotales</h4><p>Ingresos</p></CardContent></Card>
</div>

<div class="mt-6 grid grid-cols-2 gap-6">
    <Card><CardContent><VentasMensualesChart /></CardContent></Card>
    <Card><CardContent><MedicamentosMasVendidosChart /></CardContent></Card>
</div>

@code{
    protected override async Task OnInitializedAsync()
    {
        var resumen = await Http.GetFromJsonAsync<ResumenVentas>("api/dashboard/ventas/resumen");
        TotalVentas = resumen.TotalVentas;
        TotalUnidadesVendidas = resumen.TotalUnidadesVendidas;
        StockCritico = resumen.StockCritico;
    }
}